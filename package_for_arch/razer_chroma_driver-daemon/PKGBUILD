# Maintainer: Gabriele Musco <emaildigabry@gmail.com>
# Upstream URL: https://github.com/terrycain/razer_drivers

pkgname=razer_chroma_driver-daemon
pkgver=1.0.0
pkgrel=1
pkgdesc="A daemon for controlling razer_chroma_driver"
arch=('any')
url="https://github.com/terrycain/razer_drivers"
license=('GPLv3')
depends=('razer_chroma_driver-dkms' 'libdbus')
makedepends=('git')
install=${pkgname}.install
source=("${pkgname}::git+git://github.com/terrycain/razer_drivers#branch=daemonV2")
md5sums=('SKIP')

package() {
  # use the make file instead of copying manually? maybe, not now.
  mkdir -p $pkgdir/usr/share/razer-service
  mkdir -p $pkgdir/usr/share/man/man5
  mkdir -p $pkgdir/usr/share/man/man8
  mkdir -p $pkgdir/usr/lib/python3.5/site-packages
  mkdir -p $pkgdir/usr/sbin

  cp -r $srcdir/$pkgname/daemon/razer_daemon $pkgdir/usr/lib/python3.5/site-packages/
  cp $srcdir/$pkgname/daemon/run_razer_daemon.py $pkgdir/usr/sbin/razer-service
  cp $srcdir/$pkgname/resources/razer.conf $pkgdir/usr/share/razer-service/razer.conf.example
  
  gzip -c $srcdir/$pkgname/daemon/resources/man/razer.conf.5 > $pkgdir/usr/share/man/man5/razer.conf.5.gz
  gzip -c $srcdir/$pkgname/daemon/resources/man/razer-service.8 > $pkgdir/usr/share/man/man5/razer-service.8.gz
}
